<html>
<head>
  <title>Calendar View</title>
     <meta name = "author" content = "The League of Amazing Programmers">
    <meta name = "description" content = "The Foundation Music Center: San Diego's Music Lesson Center">
    <meta name = "robots" content = "noindex">
<meta charset="utf-8" />
<link href="https://fullcalendar.io/js/fullcalendar-scheduler-1.9.2/lib/fullcalendar.min.css" rel="stylesheet" />
<link href="https://fullcalendar.io/js/fullcalendar-scheduler-1.9.2/lib/fullcalendar.print.min.css" rel="stylesheet" media="print" />
<link href="https://fullcalendar.io/js/fullcalendar-scheduler-1.9.2/scheduler.min.css" rel="stylesheet" />
<script src="https://fullcalendar.io/js/fullcalendar-scheduler-1.9.2/lib/moment.min.js"></script>
<script src="https://fullcalendar.io/js/fullcalendar-scheduler-1.9.2/lib/jquery.min.js"></script>
<script src="https://fullcalendar.io/js/fullcalendar-scheduler-1.9.2/lib/fullcalendar.min.js"></script>
<script src="https://fullcalendar.io/js/fullcalendar-scheduler-1.9.2/scheduler.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script>

  $(function() { // document ready

	  $.getJSON("/lessons/all", function(data) {
	  
		  let resources = [];
		  let events = [];
		  console.log(data);
		  data.forEach(function(lesson) {
			if (!resources.some(function(room_) { return room_.id === lesson.room.id })) {
				resources.push({ id: lesson.room.id, name: "Room " + lesson.room.name, eventColor: "red" });
			} 
		  });
		  console.log(resources)
		data.forEach(function(lesson, i) {
			events.push({ id: lesson.id, resourceId: lesson.room.id, start: new Date(lesson.date), end: new Date(lesson.date + lesson.duration * 1000 * 60), title: "Lesson " + i })
		  });
		  console.log(events);
	  
    $("#calendar").fullCalendar({
      now: new Date(),
      editable: true, // enable draggable events
      aspectRatio: 1.8,
      scrollTime: "00:00", // undo default 6am scrollTime
      header: {
        left: "today prev,next",
        center: "title",
        right: "timelineDay,timelineThreeDays,agendaWeek,month,listWeek"
      },
      defaultView: "timelineDay",
      views: {
        timelineThreeDays: {
          type: "timeline",
          duration: { days: 3 }
        }
      },
      schedulerLicenseKey: "GPL-My-Project-Is-Open-Source",
      resourceLabelText: "Rooms",
<<<<<<< HEAD
      resources: [
        { id: "a", title: "Room A", eventColor: "red" },
        { id: "b", title: "Room B", eventColor: "darkorange" },
        { id: "c", title: "Room C", eventColor: "gold"},
        { id: "d", title: "Room D", eventColor: "green"},
        { id: "e", title: "Room E", eventColor: "blue"},
        { id: "f", title: "Room F", eventColor: "indigo" },
        { id: "g", title: "Room G", eventColor: "violet"},
     
      ],
      events: [
        { id: "1", resourceId: "b", start: "2018-02-07T02:00:00", end: "2018-02-07T07:00:00", title: "event 1" },
        { id: "2", resourceId: "c", start: "2018-02-07T05:00:00", end: "2018-02-07T22:00:00", title: "event 2" },
        { id: "3", resourceId: "d", start: "2018-02-06", end: "2018-02-08", title: "event 3" },
        { id: "4", resourceId: "e", start: "2018-02-07T03:00:00", end: "2018-02-07T08:00:00", title: "event 4" },
        { id: "5", resourceId: "f", start: "2018-02-07T00:30:00", end: "2018-02-07T02:30:00", title: "event 5" }
      ]
=======
      resources: resources,
      events: events
>>>>>>> LeaguePelicans/master
    });
	  });
  
  });

</script>
<style>

  body {
    margin: 0;
    padding: 0;
    font-family: "Lucida Grande",Helvetica,Arial,Verdana,sans-serif;
    font-size: 14px;
  }

  #calendar {
    max-width: 900px;
    margin: 50px auto;
  }

</style>
</head>
<body>
</body>
   <a href = "/homepage.html" class="btn"><i class="fa fa-home"></i>  home</a>
  <div id="calendar"></div>
</html>
